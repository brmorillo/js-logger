#!/usr/bin/env sh

echo "ğŸ” Running pre-push checks..."
echo ""

# Lint check and fix
echo "ğŸ“‹ Running lint check and fix..."
bun run lint:fix
if [ $? -ne 0 ]; then
  echo "âŒ Lint check failed. Please fix linting errors."
  exit 1
fi
echo "âœ… Lint passed"
echo ""

# Run all tests
echo "ğŸ§ª Running all tests..."
bun test
if [ $? -ne 0 ]; then
  echo "âŒ Tests failed. Please fix failing tests."
  exit 1
fi
echo "âœ… Tests passed"
echo ""

# Type check
echo "ğŸ” Running type check..."
bun run type-check
if [ $? -ne 0 ]; then
  echo "âŒ Type check failed. Please fix type errors."
  exit 1
fi
echo "âœ… Type check passed"
echo ""

# Build
echo "ğŸ”¨ Running build..."
bun run build
if [ $? -ne 0 ]; then
  echo "âŒ Build failed. Please fix build errors."
  exit 1
fi
echo "âœ… Build passed"
echo ""

echo "âœ¨ All pre-push checks passed! Pushing..."
